<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wakonze - Osage Alphabet Learning</title>
      <link rel="icon" type="image/x-icon" href="https://i.postimg.cc/vZtJP1SL/Screenshot-2025-09-20-at-9-26-56-PM.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Enhanced font sizes and centering */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #fce7f3, #fef3c7, #e0e7ff);
            min-height: 100vh;
            font-size: 1.125rem; /* Base font size increased */
        }
        
        /* Gradient text classes for logo - BIGGER */
        .gradient-text-1 { 
            background: linear-gradient(to right, #4f46e5, #7c3aed); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text;
            text-shadow: 0 2px 4px rgba(79, 70, 229, 0.3);
            font-size: 5rem; /* Made bigger */
        }
        .gradient-text-2 { 
            background: linear-gradient(to right, #7c3aed, #8b5cf6); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text;
            text-shadow: 0 2px 4px rgba(124, 58, 237, 0.3);
            font-size: 5rem; /* Made bigger */
        }
        .gradient-text-3 { 
            background: linear-gradient(to right, #8b5cf6, #ec4899); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text;
            text-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);
            font-size: 5rem; /* Made bigger */
        }
        .gradient-text-4 { 
            background: linear-gradient(to right, #ec4899, #f43f5e); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text;
            text-shadow: 0 2px 4px rgba(236, 72, 153, 0.3);
            font-size: 5rem; /* Made bigger */
        }
        .gradient-text-5 { 
            background: linear-gradient(to right, #f43f5e, #f97316); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text;
            text-shadow: 0 2px 4px rgba(244, 63, 94, 0.3);
            font-size: 5rem; /* Made bigger */
        }
        .gradient-text-6 { 
            background: linear-gradient(to right, #f97316, #eab308); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text;
            text-shadow: 0 2px 4px rgba(249, 115, 22, 0.3);
            font-size: 5rem; /* Made bigger */
        }
        .gradient-text-7 { 
            background: linear-gradient(to right, #eab308, #22c55e); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text;
            text-shadow: 0 2px 4px rgba(234, 179, 8, 0.3);
            font-size: 5rem; /* Made bigger */
        }
        
        /* Logo text bigger */
        .logo-text {
            font-size: 1.5rem; /* Made bigger */
            font-weight: 700;
            color: #312e81;
            letter-spacing: 0.2em;
        }
        
        /* Button styles - BIGGER */
        .btn {
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: none;
            cursor: pointer;
            font-weight: 600;
            border-radius: 1rem; /* Bigger border radius */
            font-size: 1.25rem; /* Bigger font */
            padding: 1rem 2rem; /* Bigger padding */
        }
        .btn:hover { 
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #4338ca, #6d28d9);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #7c3aed, #ec4899);
            color: white;
        }
        .btn-secondary:hover {
            background: linear-gradient(135deg, #6d28d9, #db2777);
        }
        
        .btn-tertiary {
            background: linear-gradient(135deg, #eab308, #f97316);
            color: white;
        }
        .btn-tertiary:hover {
            background: linear-gradient(135deg, #d97706, #ea580c);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }
        .btn-warning {
            background: linear-gradient(135deg, #eab308, #f59e0b);
            color: white;
        }
        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        /* Card styles */
        .card { 
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .card:hover { 
            transform: scale(1.02) translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        /* Flashcard specific styles - BIGGER */
        .flashcard { 
            cursor: pointer; 
            transition: all 0.3s ease;
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(79, 70, 229, 0.1);
            width: 24rem; /* Made bigger */
            height: 24rem; /* Made bigger */
            font-size: 5rem; /* Made bigger */
        }
        .flashcard:hover { 
            transform: scale(1.05) translateY(-8px) rotateY(5deg);
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.15);
            border-color: rgba(79, 70, 229, 0.3);
        }
        .flashcard:active {
            transform: scale(0.98);
        }
        
        /* Unit card styles */
        .unit-card {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            border: 1px solid rgba(79, 70, 229, 0.1);
            border-radius: 1rem;
            padding: 2rem; /* Bigger padding */
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            text-align: center; /* Center content */
        }
        .unit-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
            border-color: rgba(79, 70, 229, 0.2);
        }
        
        /* Letter badge styles - BIGGER */
        .letter-badge {
            background: linear-gradient(135deg, #eef2ff, #e0e7ff);
            border: 1px solid rgba(79, 70, 229, 0.2);
            border-radius: 0.75rem; /* Bigger */
            padding: 0.75rem 1rem; /* Bigger padding */
            display: inline-flex;
            align-items: center;
            justify-content: center; /* Center content */
            gap: 0.75rem; /* Bigger gap */
            transition: all 0.2s ease;
            font-size: 1.125rem; /* Bigger font */
        }
        .letter-badge:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, #e0e7ff, #c7d2fe);
        }
        
        /* Reference card styles - BIGGER */
        .ref-card {
            background: linear-gradient(145deg, #eef2ff, #e0e7ff);
            border-radius: 1rem; /* Bigger */
            padding: 1.5rem; /* Bigger padding */
            transition: all 0.2s ease;
            border: 1px solid rgba(79, 70, 229, 0.1);
            text-align: center; /* Center content */
        }
        .ref-card:hover {
            transform: scale(1.05) translateY(-2px);
            background: linear-gradient(145deg, #e0e7ff, #c7d2fe);
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.15);
        }
        
        /* Screen backgrounds */
        .screen {
            min-height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* Center everything vertically */
            text-align: center; /* Center text */
            padding: 2rem;
        }
        
        .home-bg {
            background: linear-gradient(135deg, #fce7f3, #fef3c7, #e0e7ff);
        }
        
        .units-bg {
            background: linear-gradient(135deg, #f3e8ff, #fce7f3, #fef3c7);
            justify-content: flex-start; /* Different for units screen */
            padding-top: 6rem;
        }
        
        .reference-bg {
            background: linear-gradient(135deg, #e0e7ff, #fce7f3, #fef3c7);
            justify-content: flex-start; /* Different for reference screen */
            padding-top: 6rem;
        }
        
        .learning-bg {
            background: linear-gradient(135deg, #fce7f3, #fef3c7, #e0e7ff);
        }
        
        /* Typography - BIGGER FONTS */
        h1 { font-size: 3rem; font-weight: 800; }
        h2 { font-size: 2.5rem; font-weight: 700; }
        h3 { font-size: 2rem; font-weight: 600; }
        p { font-size: 1.25rem; line-height: 1.6; }
        
        /* Center containers */
        .centered-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Animation keyframes */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        .animate-pulse-gentle {
            animation: pulse 3s ease-in-out infinite;
        }
        
        /* Utility classes */
        .hidden { display: none !important; }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .text-shadow {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .logo-shadow {
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .gradient-text-1, .gradient-text-2, .gradient-text-3, 
            .gradient-text-4, .gradient-text-5, .gradient-text-6, .gradient-text-7 {
                font-size: 3.5rem; /* Smaller on mobile but still big */
            }
            
            .logo-text {
                font-size: 1.25rem;
            }
            
            .flashcard {
                width: 20rem;
                height: 20rem;
                font-size: 4rem;
            }
            
            .btn {
                font-size: 1.125rem;
                padding: 0.875rem 1.5rem;
            }
            
            h2 { font-size: 2rem; }
            h3 { font-size: 1.75rem; }
        }
        
        @media (max-width: 640px) {
            .gradient-text-1, .gradient-text-2, .gradient-text-3, 
            .gradient-text-4, .gradient-text-5, .gradient-text-6, .gradient-text-7 {
                font-size: 3rem;
            }
            
            .flashcard {
                width: 18rem;
                height: 18rem;
                font-size: 3.5rem;
            }
        }
    </style>
</head>
<body class="screen home-bg">
    
    <!-- Home Screen -->
    <div id="home-screen" class="screen home-bg flex flex-col items-center justify-center p-8 animate-fade-in">
        <div class="centered-container">
            <div class="flex flex-col items-center mb-12 animate-pulse-gentle">
                <div class="font-extrabold drop-shadow-lg flex items-center gap-2 mb-4 logo-shadow">
                    <span class="gradient-text-1">𐓏</span>
                    <span class="gradient-text-2">𐒰</span>
                    <span class="gradient-text-3">𐒼</span>
                    <span class="gradient-text-4">𐓂</span>
                    <span class="gradient-text-5">𐓁</span>
                    <span class="gradient-text-6">𐓓</span>
                    <span class="gradient-text-7">𐒻̄</span>
                </div>
                <div class="logo-text text-shadow">WAKONZE</div>
            </div>
            
            <div class="text-2xl text-gray-800 mb-12 text-center max-w-2xl text-shadow">
                Learn the Osage alphabet with spaced repetition
            </div>
            
            <div class="flex flex-col gap-8 w-full max-w-md">
                <button onclick="showUnits()" class="btn btn-primary">
                    📚 Learn by Units
                </button>
                <button onclick="startLearning(null)" class="btn btn-secondary">
                    🌟 Learn All Letters
                </button>
                <button onclick="showReference()" class="btn btn-tertiary">
                    📖 Reference Chart
                </button>
            </div>
            
            <button onclick="resetProgress()" class="btn mt-8 bg-gray-500 hover:bg-gray-600 text-white text-lg">
                🔄 Reset Progress
            </button>
        </div>
    </div>

    <!-- Units Screen -->
    <div id="units-screen" class="hidden screen units-bg p-6">
        <div class="flex items-center justify-between mb-6">
            <button onclick="showHome()" class="btn bg-indigo-700 hover:bg-indigo-800 text-white px-4 py-2">
                ⬅ Home
            </button>
            <div class="flex flex-col items-center">
                <div class="text-3xl font-extrabold drop-shadow-lg flex items-center gap-1 mb-1 logo-shadow">
                    <span class="gradient-text-1" style="font-size: 2rem;">𐓏</span>
                    <span class="gradient-text-2" style="font-size: 2rem;">𐒰</span>
                    <span class="gradient-text-3" style="font-size: 2rem;">𐒼</span>
                    <span class="gradient-text-4" style="font-size: 2rem;">𐓂</span>
                    <span class="gradient-text-5" style="font-size: 2rem;">𐓁</span>
                    <span class="gradient-text-6" style="font-size: 2rem;">𐓓</span>
                    <span class="gradient-text-7" style="font-size: 2rem;">𐒻̄</span>
                </div>
                <div class="text-sm font-semibold text-indigo-800 tracking-wider">WAKONZE</div>
            </div>
        </div>
        
        <h2 class="text-4xl font-bold mb-8 text-indigo-900 text-center text-shadow">Choose a Unit to Study</h2>
        
        <div class="max-w-4xl mx-auto space-y-6" id="units-container">
            <!-- Units will be populated by JavaScript -->
        </div>
    </div>

    <!-- Reference Screen -->
    <div id="reference-screen" class="hidden screen reference-bg p-6">
        <div class="flex items-center justify-between mb-6">
            <button onclick="showHome()" class="btn bg-indigo-700 hover:bg-indigo-800 text-white px-4 py-2">
                ⬅ Home
            </button>
            <div class="flex flex-col items-center">
                <div class="text-3xl font-extrabold drop-shadow-lg flex items-center gap-1 mb-1 logo-shadow">
                    <span class="gradient-text-1" style="font-size: 2rem;">𐓏</span>
                    <span class="gradient-text-2" style="font-size: 2rem;">𐒰</span>
                    <span class="gradient-text-3" style="font-size: 2rem;">𐒼</span>
                    <span class="gradient-text-4" style="font-size: 2rem;">𐓂</span>
                    <span class="gradient-text-5" style="font-size: 2rem;">𐓁</span>
                    <span class="gradient-text-6" style="font-size: 2rem;">𐓓</span>
                    <span class="gradient-text-7" style="font-size: 2rem;">𐒻̄</span>
                </div>
                <div class="text-sm font-semibold text-indigo-800 tracking-wider">WAKONZE</div>
            </div>
        </div>
        
        <h2 class="text-4xl font-bold mb-6 text-indigo-900 text-center text-shadow">Reference Chart</h2>
        
        <div class="max-w-6xl mx-auto space-y-8" id="reference-container">
            <!-- Reference will be populated by JavaScript -->
        </div>
    </div>

    <!-- Learning Screen -->
    <div id="learning-screen" class="hidden screen learning-bg flex flex-col items-center justify-center relative">
        <button onclick="showHome()" class="btn absolute top-6 left-6 bg-indigo-700 hover:bg-indigo-800 text-white px-4 py-2">
            ⬅ Home
        </button>
        
        <div class="absolute top-6 right-6 flex flex-col items-center">
            <div class="text-2xl font-extrabold drop-shadow-lg flex items-center gap-1 mb-1 logo-shadow">
                <span class="gradient-text-1" style="font-size: 1.5rem;">𐓏</span>
                <span class="gradient-text-2" style="font-size: 1.5rem;">𐒰</span>
                <span class="gradient-text-3" style="font-size: 1.5rem;">𐒼</span>
                <span class="gradient-text-4" style="font-size: 1.5rem;">𐓂</span>
                <span class="gradient-text-5" style="font-size: 1.5rem;">𐓁</span>
                <span class="gradient-text-6" style="font-size: 1.5rem;">𐓓</span>
                <span class="gradient-text-7" style="font-size: 1.5rem;">𐒻̄</span>
            </div>
            <div class="text-xs font-semibold text-indigo-800 tracking-wider">WAKONZE</div>
        </div>

        <div id="unit-indicator" class="hidden absolute top-20 left-1/2 transform -translate-x-1/2 glass-effect px-4 py-2 rounded-xl">
            <span class="text-indigo-800 font-semibold" id="current-unit-name"></span>
        </div>

        <div class="text-center mb-6">
            <p class="text-gray-600 text-lg">Click the card to reveal the answer</p>
        </div>

        <div class="w-96 h-96 flex items-center justify-center text-6xl font-bold flashcard rounded-3xl" onclick="flipCard()">
            <div class="flex items-center justify-center w-full h-full" id="card-content">
                <span class="text-indigo-800" id="card-letter">𐒰</span>
                <span class="text-4xl text-gray-700 hidden" id="card-sound">a</span>
            </div>
        </div>

        <div id="rating-buttons" class="hidden flex gap-4 mt-8">
            <button onclick="rateCard('hard')" class="btn btn-danger px-6 py-3 text-lg font-semibold">
                Hard
            </button>
            <button onclick="rateCard('good')" class="btn btn-warning px-6 py-3 text-lg font-semibold">
                Good
            </button>
            <button onclick="rateCard('easy')" class="btn btn-success px-6 py-3 text-lg font-semibold">
                Easy
            </button>
        </div>

        <div class="mt-6 text-center text-sm text-gray-600" id="rating-help">
            <p class="hidden text-lg">Rate how well you knew this letter</p>
        </div>
    </div>

    <script>
        // Osage alphabet organized by units - corrected based on actual Osage script
        const osageUnits = {
            "Unit 1: Vowels": [
                { letter: "𐒰", sound: "a" },
                { letter: "𐒱", sound: "ai" },
                { letter: "𐒲", sound: "e" },
                { letter: "𐒳", sound: "i" },
                { letter: "𐒴", sound: "o" },
                { letter: "𐒵", sound: "u" },
            ],
            "Unit 2: Nasal Vowels": [
                { letter: "𐓘", sound: "ą" },
                { letter: "𐓙", sound: "ąi" },
                { letter: "𐓚", sound: "ę" },
                { letter: "𐓛", sound: "į" },
                { letter: "𐓜", sound: "ǫ" },
                { letter: "𐓝", sound: "ų" },
            ],
            "Unit 3: Basic Consonants": [
                { letter: "𐒷", sound: "b" },
                { letter: "𐒸", sound: "c" },
                { letter: "𐒹", sound: "č" },
                { letter: "𐒺", sound: "d" },
                { letter: "𐒻", sound: "ð" },
                { letter: "𐒼", sound: "f" },
            ],
            "Unit 4: More Consonants": [
                { letter: "𐒽", sound: "g" },
                { letter: "𐒾", sound: "h" },
                { letter: "𐒿", sound: "k" },
                { letter: "𐓀", sound: "l" },
                { letter: "𐓁", sound: "n" },
                { letter: "𐓂", sound: "m" },
            ],
            "Unit 5: Additional Consonants": [
                { letter: "𐓃", sound: "e" },
                { letter: "𐓄", sound: "p" },
                { letter: "𐓅", sound: "s" },
                { letter: "𐓆", sound: "š" },
                { letter: "𐓇", sound: "t" },
                { letter: "𐓈", sound: "j" },
            ],
            "Unit 6: Final Consonants": [
                { letter: "𐓉", sound: "x" },
                { letter: "𐓊", sound: "y" },
                { letter: "𐓋", sound: "z" },
                { letter: "𐓌", sound: "ž" },
                { letter: "𐓍", sound: "θ" },
            ],
            "Unit 7: Aspiration & Special": [
                { letter: "𐓎", sound: "hy" },
                { letter: "𐓏", sound: "ky" },
                { letter: "𐓐", sound: "ph" },
                { letter: "𐓑", sound: "th" },
                { letter: "𐓒", sound: "kh" },
            ],
        };

        // Flatten all letters
        const osageAlphabet = Object.values(osageUnits).flat();

        // App state
        let deck = [];
        let currentCard = null;
        let selectedUnit = null;
        let isFlipped = false;
        let progressData = {};

        // Screen navigation functions - defined first so they're available to onclick handlers
        function showHome() {
            hideAllScreens();
            document.getElementById('home-screen').classList.remove('hidden');
            selectedUnit = null;
        }

        function showUnits() {
            hideAllScreens();
            document.getElementById('units-screen').classList.remove('hidden');
            populateUnits();
        }

        function showReference() {
            hideAllScreens();
            document.getElementById('reference-screen').classList.remove('hidden');
            populateReference();
        }

        function startLearning(unitName) {
            selectedUnit = unitName;
            hideAllScreens();
            document.getElementById('learning-screen').classList.remove('hidden');
            
            if (selectedUnit) {
                document.getElementById('unit-indicator').classList.remove('hidden');
                document.getElementById('current-unit-name').textContent = selectedUnit;
            } else {
                document.getElementById('unit-indicator').classList.add('hidden');
            }
            
            loadNextCard();
        }

        function hideAllScreens() {
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('units-screen').classList.add('hidden');
            document.getElementById('reference-screen').classList.add('hidden');
            document.getElementById('learning-screen').classList.add('hidden');
        }

        function flipCard() {
            if (!isFlipped) {
                isFlipped = true;
                document.getElementById('card-letter').classList.add('hidden');
                document.getElementById('card-sound').classList.remove('hidden');
                document.getElementById('rating-buttons').classList.remove('hidden');
                document.getElementById('rating-help').querySelector('p').classList.remove('hidden');
            }
        }

        function rateCard(rating) {
            if (!currentCard || !isFlipped) return;

            // Update card based on rating using SM-2 algorithm
            const cardIndex = deck.findIndex(card => card.letter === currentCard.letter);
            if (cardIndex === -1) return;

            let card = deck[cardIndex];
            let quality = rating === 'hard' ? 1 : rating === 'good' ? 3 : 5;
            
            if (quality >= 3) {
                if (card.repetitions === 0) {
                    card.interval = 1;
                } else if (card.repetitions === 1) {
                    card.interval = 6;
                } else {
                    card.interval = Math.round(card.interval * card.ease);
                }
                card.repetitions++;
            } else {
                card.repetitions = 0;
                card.interval = 1;
            }

            card.ease = card.ease + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02));
            if (card.ease < 1.3) card.ease = 1.3;

            card.due = Date.now() + card.interval * 24 * 60 * 60 * 1000;
            card.quality = quality;

            deck[cardIndex] = card;
            saveProgress();
            loadNextCard();
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                try {
                    localStorage.removeItem('wakonzeProgress');
                } catch (e) {
                    // LocalStorage not available, just reset in memory
                }
                initializeDeck();
                alert('Progress has been reset!');
            }
        }

        // Initialize spaced repetition deck
        function initializeDeck() {
            deck = osageAlphabet.map(item => ({
                ...item,
                interval: 1,
                ease: 2.5,
                due: Date.now(),
                repetitions: 0,
                quality: 0
            }));
            
            // Load progress from localStorage if available
            const savedProgress = localStorage.getItem('wakonzeProgress');
            if (savedProgress) {
                try {
                    progressData = JSON.parse(savedProgress);
                    // Apply saved progress to deck
                    deck.forEach(card => {
                        if (progressData[card.letter]) {
                            Object.assign(card, progressData[card.letter]);
                        }
                    });
                } catch (e) {
                    console.log('Could not load saved progress');
                }
            }
        }

        // Save progress to localStorage
        function saveProgress() {
            progressData = {};
            deck.forEach(card => {
                progressData[card.letter] = {
                    interval: card.interval,
                    ease: card.ease,
                    due: card.due,
                    repetitions: card.repetitions,
                    quality: card.quality
                };
            });
            localStorage.setItem('wakonzeProgress', JSON.stringify(progressData));
        }

        // Screen navigation
        function showHome() {
            hideAllScreens();
            document.getElementById('home-screen').classList.remove('hidden');
            selectedUnit = null;
        }

        function showUnits() {
            hideAllScreens();
            document.getElementById('units-screen').classList.remove('hidden');
            populateUnits();
        }

        function showReference() {
            hideAllScreens();
            document.getElementById('reference-screen').classList.remove('hidden');
            populateReference();
        }

        function startLearning(unitName) {
            selectedUnit = unitName;
            hideAllScreens();
            document.getElementById('learning-screen').classList.remove('hidden');
            
            if (selectedUnit) {
                document.getElementById('unit-indicator').classList.remove('hidden');
                document.getElementById('current-unit-name').textContent = selectedUnit;
            } else {
                document.getElementById('unit-indicator').classList.add('hidden');
            }
            
            loadNextCard();
        }

        function hideAllScreens() {
            document.getElementById('home-screen').classList.add('hidden');
            document.getElementById('units-screen').classList.add('hidden');
            document.getElementById('reference-screen').classList.add('hidden');
            document.getElementById('learning-screen').classList.add('hidden');
        }

        // Populate units screen
        function populateUnits() {
            const container = document.getElementById('units-container');
            container.innerHTML = '';
            
            Object.entries(osageUnits).forEach(([unitName, letters]) => {
                const unitDiv = document.createElement('div');
                unitDiv.className = 'unit-card animate-fade-in';
                
                unitDiv.innerHTML = `
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                        <div>
                            <h3 class="text-2xl font-bold text-indigo-800 mb-3 text-shadow">${unitName}</h3>
                            <div class="flex flex-wrap gap-3 mb-4 justify-center lg:justify-start">
                                ${letters.map(item => `
                                    <div class="letter-badge">
                                        <span class="text-2xl text-indigo-700 font-bold">${item.letter}</span>
                                        <span class="text-gray-600 font-medium">(${item.sound})</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <button onclick="startLearning('${unitName}')" class="btn btn-primary px-8 py-4 text-lg font-semibold whitespace-nowrap">
                            Study This Unit
                        </button>
                    </div>
                `;
                
                container.appendChild(unitDiv);
            });
        }

        // Populate reference screen
        function populateReference() {
            const container = document.getElementById('reference-container');
            container.innerHTML = '';
            
            Object.entries(osageUnits).forEach(([unitName, letters]) => {
                const unitDiv = document.createElement('div');
                unitDiv.className = 'unit-card animate-fade-in';
                
                unitDiv.innerHTML = `
                    <h3 class="text-2xl font-bold text-indigo-800 mb-6 text-center text-shadow">${unitName}</h3>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                        ${letters.map(item => `
                            <div class="ref-card text-center">
                                <div class="text-4xl text-indigo-800 mb-3 font-bold">${item.letter}</div>
                                <div class="text-sm text-gray-700 font-medium">${item.sound}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                container.appendChild(unitDiv);
            });
        }

        // Learning logic
        function loadNextCard() {
            let availableCards = deck;
            
            if (selectedUnit) {
                const unitCards = osageUnits[selectedUnit];
                availableCards = deck.filter(card => 
                    unitCards.some(unitCard => unitCard.letter === card.letter)
                );
            }
            
            const dueCards = availableCards.filter(c => c.due <= Date.now());
            if (dueCards.length > 0) {
                currentCard = dueCards[Math.floor(Math.random() * dueCards.length)];
            } else {
                currentCard = availableCards[Math.floor(Math.random() * availableCards.length)];
            }
            
            showCard();
        }

        function showCard() {
            isFlipped = false;
            document.getElementById('card-letter').textContent = currentCard.letter;
            document.getElementById('card-sound').textContent = currentCard.sound;
            document.getElementById('card-letter').classList.remove('hidden');
            document.getElementById('card-sound').classList.add('hidden');
            document.getElementById('rating-buttons').classList.add('hidden');
            document.getElementById('rating-help').querySelector('p').classList.add('hidden');
        }

        function flipCard() {
            if (!isFlipped) {
                isFlipped = true;
                document.getElementById('card-letter').classList.add('hidden');
                document.getElementById('card-sound').classList.remove('hidden');
                document.getElementById('rating-buttons').classList.remove('hidden');
                document.getElementById('rating-help').querySelector('p').classList.remove('hidden');
            }
        }

        function rateCard(rating) {
            if (!currentCard || !isFlipped) return;

            // Update card based on rating using SM-2 algorithm
            const cardIndex = deck.findIndex(card => card.letter === currentCard.letter);
            if (cardIndex === -1) return;

            let card = deck[cardIndex];
            let quality = rating === 'hard' ? 1 : rating === 'good' ? 3 : 5;
            
            if (quality >= 3) {
                if (card.repetitions === 0) {
                    card.interval = 1;
                } else if (card.repetitions === 1) {
                    card.interval = 6;
                } else {
                    card.interval = Math.round(card.interval * card.ease);
                }
                card.repetitions++;
            } else {
                card.repetitions = 0;
                card.interval = 1;
            }

            card.ease = card.ease + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02));
            if (card.ease < 1.3) card.ease = 1.3;

            card.due = Date.now() + card.interval * 24 * 60 * 60 * 1000;
            card.quality = quality;

            deck[cardIndex] = card;
            saveProgress();
            loadNextCard();
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                localStorage.removeItem('wakonzeProgress');
                initializeDeck();
                alert('Progress has been reset!');
            }
        }

        // Initialize spaced repetition deck
        function initializeDeck() {
            deck = osageAlphabet.map(item => ({
                ...item,
                interval: 1,
                ease: 2.5,
                due: Date.now(),
                repetitions: 0,
                quality: 0
            }));
            
            // Load progress from localStorage if available
            try {
                const savedProgress = localStorage.getItem('wakonzeProgress');
                if (savedProgress) {
                    progressData = JSON.parse(savedProgress);
                    // Apply saved progress to deck
                    deck.forEach(card => {
                        if (progressData[card.letter]) {
                            Object.assign(card, progressData[card.letter]);
                        }
                    });
                }
            } catch (e) {
                console.log('Could not load saved progress - localStorage not available');
            }
        }

        // Save progress to localStorage
        function saveProgress() {
            try {
                progressData = {};
                deck.forEach(card => {
                    progressData[card.letter] = {
                        interval: card.interval,
                        ease: card.ease,
                        due: card.due,
                        repetitions: card.repetitions,
                        quality: card.quality
                    };
                });
                localStorage.setItem('wakonzeProgress', JSON.stringify(progressData));
            } catch (e) {
                console.log('Could not save progress - localStorage not available');
            }
        }

        // Populate units screen
        function populateUnits() {
            const container = document.getElementById('units-container');
            container.innerHTML = '';
            
            Object.entries(osageUnits).forEach(([unitName, letters]) => {
                const unitDiv = document.createElement('div');
                unitDiv.className = 'unit-card animate-fade-in';
                
                unitDiv.innerHTML = `
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                        <div>
                            <h3 class="text-2xl font-bold text-indigo-800 mb-3 text-shadow">${unitName}</h3>
                            <div class="flex flex-wrap gap-3 mb-4 justify-center lg:justify-start">
                                ${letters.map(item => `
                                    <div class="letter-badge">
                                        <span class="text-2xl text-indigo-700 font-bold">${item.letter}</span>
                                        <span class="text-gray-600 font-medium">(${item.sound})</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <button onclick="startLearning('${unitName}')" class="btn btn-primary px-8 py-4 text-lg font-semibold whitespace-nowrap">
                            Study This Unit
                        </button>
                    </div>
                `;
                
                container.appendChild(unitDiv);
            });
        }

        // Populate reference screen
        function populateReference() {
            const container = document.getElementById('reference-container');
            container.innerHTML = '';
            
            Object.entries(osageUnits).forEach(([unitName, letters]) => {
                const unitDiv = document.createElement('div');
                unitDiv.className = 'unit-card animate-fade-in';
                
                unitDiv.innerHTML = `
                    <h3 class="text-2xl font-bold text-indigo-800 mb-6 text-center text-shadow">${unitName}</h3>
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                        ${letters.map(item => `
                            <div class="ref-card text-center">
                                <div class="text-4xl text-indigo-800 mb-3 font-bold">${item.letter}</div>
                                <div class="text-sm text-gray-700 font-medium">${item.sound}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                container.appendChild(unitDiv);
            });
        }

        // Learning logic
        function loadNextCard() {
            let availableCards = deck;
            
            if (selectedUnit) {
                const unitCards = osageUnits[selectedUnit];
                availableCards = deck.filter(card => 
                    unitCards.some(unitCard => unitCard.letter === card.letter)
                );
            }
            
            const dueCards = availableCards.filter(c => c.due <= Date.now());
            if (dueCards.length > 0) {
                currentCard = dueCards[Math.floor(Math.random() * dueCards.length)];
            } else {
                currentCard = availableCards[Math.floor(Math.random() * availableCards.length)];
            }
            
            showCard();
        }

        function showCard() {
            isFlipped = false;
            document.getElementById('card-letter').textContent = currentCard.letter;
            document.getElementById('card-sound').textContent = currentCard.sound;
            document.getElementById('card-letter').classList.remove('hidden');
            document.getElementById('card-sound').classList.add('hidden');
            document.getElementById('rating-buttons').classList.add('hidden');
            document.getElementById('rating-help').querySelector('p').classList.add('hidden');
        }

        // Initialize the app when page loads
        initializeDeck();
    </script>
